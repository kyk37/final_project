<!DOCTYPE html>
<html data-theme="dark">
  
<head>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="/static/styles.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
  <title>Event Management Website</title>
</head>

<body>
  <div class=" page-container">
    <div class="header">
      <div class="header-left">
        <h1>Event Manager</h1>
      </div>

      <div class="header-right">
        <a href="/" class="login-btn">Home</a>
      </div>
    </div>

    <div class="content">
    <div class="left">
      <h2 style="text-align:center;">Account Settings</h2>
      <div class="menu">
        <a href="/profile/home" class="menuitem">Home</a>
        <a href="/profile/edit" class="menuitem">Edit Profile</a>
        <a href="/profile/security" class="menuitem">Security</a>
        <a href="/profile/calendar" class="menuitem">Calendar</a>
        <a href="/profile/events" class="menuitem">Events Joined</a>
        {% if is_organizer %}
        <a href="/organizer/create_event" class="menuitem">Create Event</a>
        {% endif %}       
        <div><br></div>
        <a href="#" class="menuitem" onclick="logout()">Logout</a>


      </div>
    </div>

      <!-- Main Section -->
      <div class="main">
        <div class="search-section">
          <h2 style="text-align:center;">Profile Settings</h2> <!--Username can go here-->

          <div class="profile-box">
            
            <form action="/profile/edit" method="post", enctype="multipart/form-data">
              <!--css issues with Search Box: Forcing HTML so the name is beside the value-->
              <div style="display: flex; align-items: center; margin-bottom: 12px;">
                <label for="first_name" style="width: 120px; min-width: 120px; font-weight: bold; text-align: right; margin-right: 10px;">
                  First Name:
                </label>
                <input type="text" id="first_name" name="first_name" value="{{ first_name }}" required
                       style="flex: 1; padding: 8px; border-radius: 4px; border: 1px solid #ccc;">
              </div>
              
              <div style="display: flex; align-items: center; margin-bottom: 12px;">
                <label for="last_name" style="width: 120px; min-width: 120px; font-weight: bold; text-align: right; margin-right: 10px;">
                  Last Name:
                </label>
                <input type="text" id="last_name" name="last_name" value="{{ last_name }}"
                       style="flex: 1; padding: 8px; border-radius: 4px; border: 1px solid #ccc;">
              </div>
              
              <div style="display: flex; align-items: center; margin-bottom: 12px;">
                <label for="email" style="width: 120px; min-width: 120px; font-weight: bold; text-align: right; margin-right: 10px;">
                  Email:
                </label>
                <input type="text" id="email" name="email" value="{{ email }}"
                       style="flex: 1; padding: 8px; border-radius: 4px; border: 1px solid #ccc;">
              </div>

              <div style="display: flex; align-items: center; margin-bottom: 12px;">
                <label for="age" style="width: 120px; min-width: 120px; font-weight: bold; text-align: right; margin-right: 10px;">
                  Age:
                </label>
                <input type="text" id="age" name="age" 
                       value="{{ age or '' }}"
                       oninput="this.value = this.value.replace(/\D/g, '')"
                       maxlength="3"
                       minlength="1"
                       required
                       style="flex: 1; padding: 12px; border-radius: 4px; border: 1px solid #ccc;">
              </div
              </div>

              <div style="display: flex; align-items: center; margin-bottom: 12px;">
                <label for="phone" style="width: 120px; min-width: 120px; font-weight: bold; text-align: right; margin-right: 10px;">
                  Phone:
                </label>
                <input type="text" id="phone" name="phone" 
                       value="{{ phone or '' }}"
                       oninput="this.value = this.value.replace(/\D/g, '')"
                       pattern="\d{10,15}"
                       maxlength="15"
                       minlength="10"
                       required
                       style="flex: 1; padding: 12px; border-radius: 4px; border: 1px solid #ccc;">
              </div
              

              <div style="display: flex; align-items: center; margin-bottom: 12px;">
                <label for="address" style="width: 120px; min-width: 120px; font-weight: bold; text-align: right; margin-right: 10px;">
                  Address:
                </label>

                <input type="text" id="address" name="address" value="{{ address }}"
                       style="flex: 1; padding: 8px; border-radius: 4px; border: 1px solid #ccc;">
              </div>


              <div style="display: flex; align-items: center; margin-bottom: 12px;">
                <label for="profile_picture" style="width: 120px; min-width: 120px; font-weight: bold; text-align: right; margin-right: 10px;">
                  Profile Picture:
                </label>
                <input type="file" id="profile_picture" name="profile_picture" accept="image/*" 
                       style="flex: 1; padding: 8px; border-radius: 4px; border: 1px solid #ccc;">
              </div>

              <div style="display: flex; align-items: flex-start; margin-bottom: 12px;">
                <label for="about" style="width: 120px; min-width: 120px; font-weight: bold; text-align: right; margin-right: 10px; margin-top: 5px;">
                  About:
                </label>
                <textarea id="about" name="about"
                  style="
                    flex: 1;
                    padding: 8px;
                    border-radius: 4px;
                    border: 1px solid #ccc;
                    height: 100px;
                    resize: vertical;
                    background-color: var(--background-700);
                    color: var(--text);
                  ">{{ about }}</textarea>
              </div>
              
              



              <div class="button-row">
                <button type="submit" class="submit-btn">Save Changes</button>
                <div class="header-right">
                  <a href="../profile/home" class="login-btn">Cancel</a>
                </div>
              </div>
              
          </div>
        </div>
      </div>
    </div>

    <!-- Footer -->
    <div class="footer">
      <div class="botnav">
        <a class="active" href="#home">Home</a>
        <a href="#About">About</a>
        <a href="#pPolicy">Privacy Policy</a>
        <a href="#Contact">Contact Us</a>
        <a>Â© copyright Does not Exist </a>
      </div>
    </div>
    
  </div>

  
    <script>
      const toggleTheme = () => {
        const body = document.body;
        const isDark = body.getAttribute('data-theme') === 'dark';
        body.setAttribute('data-theme', isDark ? 'light' : 'dark');
      };

      function logout() {
        fetch("/logout", {
          method: "POST"
        }).then(() => {
          window.location.href = "/login";
        }).catch(err => {
          alert("Logout failed.");
          console.error(err);
        });
      }

            
    </script>
</div>
</body>

</html>
